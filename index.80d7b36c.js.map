{"mappings":"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","sources":["js/suggest.js"],"sourcesContent":["let search = document.getElementById(\"search\");\r\nlet result = document.getElementById(\"result\");\r\nlet poster = document.getElementById(\"poster\");\r\nlet description = document.getElementById(\"description\");\r\nlet recentSearch = document.getElementById(\"recent-search\");\r\nlet information = document.getElementById(\"information\");\r\n\r\nsearch.oninput = function() {\r\n  let anime = this.value;\r\n  result.innerHTML = '';\r\n  if (anime.length > 1){ //ограничение API\r\n    fetch(`https://api.anilibria.tv/v2/searchTitles?search=${anime}&filter=id,names.ru,posters.original.url,description&limit=10`)\r\n      .then(function(response) {return response.json();})\r\n      .then(function(data) {\r\n        let list = \"\";\r\n        var suggest = '';\r\n        let temp3 = 0;\r\n        if (data.length != 0) {\r\n        if (JSON.parse(localStorage.getItem(\"searchStory\"))) {\r\n        let temp = JSON.parse(localStorage.getItem(\"searchStory\"));\r\n        let temp2 = 0;\r\n        if (temp.length - 1 <= 4) {\r\n          temp2 = 0;\r\n          temp3 = temp.length;\r\n        } else {\r\n          temp2 = temp.length - 5;\r\n          temp3 = temp.length;\r\n        }\r\n        for(i=temp.length - 1; i>=temp2; i--) { \r\n          suggest += '<li class=\"search__li\" id = \"'+ JSON.parse(localStorage.getItem(temp[i])).id + '\"><a class=\"search__link2\" data-id= \"'+ JSON.parse(localStorage.getItem(temp[i])).id + '\" href=\"#\">' + '<img class=\"search__image\" src=https://www.anilibria.tv' + JSON.parse(localStorage.getItem(temp[i])).posters.original.url + ' alt=\"постер\" />' + JSON.parse(localStorage.getItem(temp[i])).names.ru + '</a></li>';\r\n        }\r\n        }        \r\n        let temp4 = 0; \r\n        if (data.length + temp3 > 10) {\r\n          temp4 = 10 - temp3;\r\n        } else {\r\n          temp4 = data.length;\r\n        }\r\n        for (i=0; i<temp4; i++) {\r\n          list += '<li class=\"search__li\" id = \"'+ data[i].id + '\"><a class=\"search__link\" data-id= \"'+ data[i].id + '\" href=\"#\">' + '<img class=\"search__image\" src=https://www.anilibria.tv' + data[i].posters.original.url + ' alt=\"постер\" />' + data[i].names.ru + '</a></li>';\r\n        }\r\n        result.innerHTML = '<ul class=\"search__ul\">' + suggest + list + '</ul>';\r\n        } \r\n        else {\r\n          result.innerHTML = '<ul class=\"search__ul\"><li class=\"search__li\">' + 'Сожалеем, но ничего не найдено' + '</li></ul>';\r\n        }\r\n      }).catch(function (err) {\r\n      console.warn('Что-то пошло не так.', err);\r\n      })\r\n  }\r\n} \r\n\r\nresult.onclick = function(data) {\r\n  let choice = data.target.dataset.id; \r\n  if (data.target.dataset.id != undefined) {\r\n    information.style.display = 'block';\r\n    fetch(`https://api.anilibria.tv/v2/getTitle?id=${choice}&filter=id,names.ru,posters.original.url,description`)\r\n      .then(function(response) {return response.json();})\r\n      .then(function(data) {      \r\n        let searches = JSON.parse(localStorage.getItem(\"searchStory\")); \r\n        if  (!searches) {\r\n          searches = []\r\n        }\r\n        searches.push(data.id);\r\n        localStorage.setItem(\"searchStory\", JSON.stringify(searches)); \r\n        localStorage.setItem(data.id, JSON.stringify(data));          \r\n        let info = JSON.parse(localStorage.getItem(data.id));  \r\n        poster.innerHTML = '<img class=\"product-card__image\" id =\"poster\" src=\"https://www.anilibria.tv' + info.posters.original.url + '\" alt=\"Постер\" />';\r\n        description.innerHTML = '<h4 class=\"heading heading_level-4\">' + info.names.ru + '<br>' + info.description + '</h4>';\r\n        let listRecentSearch = \"\";\r\n        let keys = []; \r\n        let temp = JSON.parse(localStorage.getItem(\"searchStory\"));\r\n        let temp2 = 0;\r\n        \r\n        if (temp.length - 1 <= 2) {\r\n          temp2 = 0;\r\n        } else {\r\n          temp2 = temp.length - 3;\r\n        }\r\n        for(i=temp.length - 1; i>=temp2; i--) { \r\n          // keys.push(temp[i]);\r\n          listRecentSearch += '<a class=\"product-card product-card__pc3\" href=\"#\"><div class=\"product-card__image-container2\"><img class=\"product-card__image product-card__image2\" src=\"https://www.anilibria.tv' + JSON.parse(localStorage.getItem(temp[i])).posters.original.url + '\" alt=\"Постер\" /></div><h4 class=\"heading heading_level-5\">' + JSON.parse(localStorage.getItem(temp[i])).names.ru + '</h4></a>';\r\n        }\r\n\r\n\r\n\r\n        recentSearch.innerHTML = listRecentSearch;\r\n\r\n    }).catch(function (err) {\r\n    console.warn('Что-то пошло не так.', err);\r\n    })\r\n  }\r\n}\r\n\r\ndocument.addEventListener('click', function(e) {\r\n  if (e.target.id != 'search') {\r\n    result.style.display = 'none';\r\n  }\r\n   else {\r\n    result.style.display = 'block';\r\n  }});"],"names":[],"version":3,"file":"index.80d7b36c.js.map","sourceRoot":"/__parcel_source_root/"}